{% extends 'layout.html' %}

{% block content %}

<section class="ongs-container">
  <div class="page-inner-content">
    <h1 class="section-title">ONGs Parceiras</h1>
    <div class="subtitle-underline"></div>

    {% if ongs %}
    <div class="ongs-grid">
      {% for ong in ongs %}
      <article class="ong-card">
        <a href="{{ url_for('main.exibir_ong', ong_id=ong.id) }}" class="ong-link">
          <div class="ong-logo-wrap">
            {% if ong.logo_url %}
            <img src="{{ ong.logo_url }}" alt="{{ ong.nome }}">
            {% else %}
            <img src="{{ url_for('static', filename='images/ong-placeholder.png') }}" alt="logo">
            {% endif %}
          </div>

          <div class="ong-info">
            <h3 class="ong-name">{{ ong.nome }}</h3>
            <p class="ong-desc">{{ ong.nome_fantasia | truncate(120, True, '...') }}</p>
            <p class="ong-meta">
              {{ ong.cidade or '' }}{% if ong.estado %} • {{ ong.estado }}{% endif %}
            </p>
          </div>
        </a>
      </article>
      {% endfor %}
    </div>

    <!-- paginação simples -->
    <nav class="pagination" aria-label="Paginação ONGs">
      <ul>
        {% if page > 1 %}
        <li><a href="{{ url_for('main.ongs', page=page-1) }}">Anterior</a></li>
        {% else %}
        <li class="disabled"><span>Anterior</span></li>
        {% endif %}

        {%- for p in range(1, total_pages + 1) -%}
        {% if p == page %}
        <li class="active"><span>{{ p }}</span></li>
        {% else %}
        <li><a href="{{ url_for('main.ongs', page=p) }}">{{ p }}</a></li>
        {% endif %}
        {%- endfor -%}

        {% if page < total_pages %} <li><a href="{{ url_for('main.ongs', page=page+1) }}">Próximo</a></li>
          {% else %}
          <li class="disabled"><span>Próximo</span></li>
          {% endif %}
      </ul>
    </nav>

    {% else %}
    <p>Nenhuma ONG cadastrada no momento.</p>
    {% endif %}

  </div>
</section>

{% endblock %}